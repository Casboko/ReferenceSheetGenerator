# ADR 0001: ステートレス vs チャット方式

- ステータス: Accepted
- 日付: 2025-08-29

## 背景（Context）
Gemini 2.5 Flash Image Preview の画像生成/編集では、入力3枚/各7MB、出力最大10枚などの制約がある。既存実装はフロント直呼び/インライン画像が中心で、履歴の持ち越しは明確ではない。

## 問題（Problem）
チャット的に文脈を積むと暗黙依存が増え、再現性/デバッグ性が低下する。MVPでは最小の学習コストで安定動作が必要。

## 決定（Decision）
MVPは「毎ターンで使う参照画像をUIで明示選択する」ステートレス設計を採用する。モデルへの履歴持ち越しはしない。

## 根拠（Rationale）
- 冪等性・再実行の容易さ
- 失敗時に原因切り分けがしやすい
- レート/コスト管理が単純化

## 影響（Consequences）
- UIで参照選択の操作が必要になる
- 複雑な文脈創作は将来拡張で検討

## 代替案（Alternatives）
- チャット方式: 文脈活用は強いが、挙動が不安定・再現困難

## 参照（References）
- `../architecture.md`
- `../gemini-integration.md`

